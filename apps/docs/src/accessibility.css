/**
 * Accessibility Styles - Focus States & Motion Support
 * Iteration 2: Foundation
 */

/* ============================================================================
   Focus Visible - All Interactive Elements
   ============================================================================ */

:focus-visible {
  outline: 2px solid var(--st-color-primary);
  outline-offset: 2px;
  border-radius: 2px;
}

/* Button focus */
button:focus-visible,
a:focus-visible,
[role="button"]:focus-visible,
[role="tab"]:focus-visible {
  outline: 2px solid var(--st-color-primary);
  outline-offset: 2px;
}

/* Form input focus */
input:focus-visible,
textarea:focus-visible,
select:focus-visible {
  outline: 2px solid var(--st-color-primary);
  outline-offset: 2px;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

/* Link focus */
a:focus-visible {
  outline: 2px solid var(--st-color-primary);
  outline-offset: 2px;
  text-decoration: underline;
}

/* High contrast mode support */
@media (prefers-contrast: more) {
  :focus-visible {
    outline-width: 3px;
    outline-offset: 3px;
  }

  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    outline-width: 3px;
    outline-offset: 3px;
  }
}

/* ============================================================================
   Reduced Motion Support
   ============================================================================ */

/* Disable all animations and transitions when user prefers reduced motion */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  /* Keep static focus rings - they don't move */
  :focus-visible {
    animation: none;
    transition: none;
  }
}

/* Allow smooth transitions only when motion is not reduced */
@media (prefers-reduced-motion: no-preference) {
  * {
    transition-duration: 150ms;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }
}

/* ============================================================================
   Hover States (Only activate on hover-capable devices)
   ============================================================================ */

@media (hover: hover) {
  button:hover:not(:disabled),
  a:hover,
  [role="button"]:hover {
    transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1),
                box-shadow 150ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  button:hover:not(:disabled):not(:active) {
    transform: translateY(-2px);
  }
}

/* ============================================================================
   Disabled State
   ============================================================================ */

button:disabled,
input:disabled,
select:disabled,
textarea:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
}

/* ============================================================================
   Visited Links
   ============================================================================ */

a:visited {
  color: var(--st-color-primary-dark, #2563eb);
  opacity: 0.8;
}

/* ============================================================================
   Skip Links (For keyboard navigation)
   ============================================================================ */

.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--st-color-primary);
  color: white;
  padding: 8px;
  text-decoration: none;
  z-index: 100;
  border-radius: 0 0 2px 0;
}

.skip-link:focus {
  top: 0;
}

/* ============================================================================
   Color Contrast - No Color Alone
   ============================================================================ */

/* Icons should have both color and text/label */
.icon-button {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--st-space-2);
}

/* Status indicators use both color and text */
.status-badge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.status-badge::before {
  content: attr(data-status);
  font-size: 0.75em;
}

